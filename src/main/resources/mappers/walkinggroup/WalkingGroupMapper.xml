<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pettory.pettory.walkinggroup.query.mapper.WalkingGroupMapper">

    <select id="selectWalkingGroups" resultType="com.pettory.pettory.walkinggroup.query.dto.WalkingGroupDTO">
        SELECT
            walking_group_id,
            walking_group_name,
            walking_group_info,
            walking_group_maximum_count,
            walking_group_state,
            walking_group_insert_datetime
         FROM walking_group
        WHERE walking_group_info LIKE CONCAT('%', #{walkingGroupInfo}, '%')
        AND walking_group_state = 'APPLICATION'

        LIMIT #{limit} OFFSET #{offset}
    </select>

    <select id="countWalkingGroups" resultType="long">
        SELECT COUNT(*)
          FROM walking_group
         WHERE walking_group_info LIKE CONCAT('%', #{walkingGroupInfo}, '%')
           AND walking_group_state = 'APPLICATION'
    </select>

    <select id="selectWalkingGroupByName" resultType="com.pettory.pettory.walkinggroup.query.dto.WalkingGroupDTO">
        SELECT
            walking_group_id,
            walking_group_name,
            walking_group_info,
            walking_group_maximum_count,
            walking_group_state,
            walking_group_insert_datetime
         FROM walking_group
        WHERE walking_group_name LIKE CONCAT('%', #{walkingGroupName}, '%')
          AND walking_group_state = 'APPLICATION'
    </select>

</mapper>